// Skills do Mago (Mage)
import { Skill, SkillTree } from './types';

// === ÃRVORE OFENSIVA (DestruiÃ§Ã£o) ===
const offensiveSkills: Skill[] = [
  // Tier 1
  {
    id: 'mage_arcane_power',
    name: 'Poder Arcano',
    emoji: 'ðŸ”®',
    description: 'Aumenta o dano mÃ¡gico.',
    branch: 'offensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'damage_bonus', value: 10, description: '+10% dano mÃ¡gico por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_mental_focus',
    name: 'Foco Mental',
    emoji: 'ðŸ§ ',
    description: 'Aumenta a chance de crÃ­tico mÃ¡gico.',
    branch: 'offensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'crit_bonus', value: 5, description: '+5% chance crÃ­tico mÃ¡gico por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_amplify',
    name: 'Amplificar',
    emoji: 'ðŸ“¶',
    description: 'Reduz o custo de mana das magias.',
    branch: 'offensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'special', value: 10, description: 'Magias custam -10% mana por nÃ­vel' }],
    isPassive: true,
  },

  // Tier 2
  {
    id: 'mage_fireball',
    name: 'Bola de Fogo',
    emoji: 'ðŸ”¥',
    description: 'LanÃ§a uma bola de fogo ardente.',
    branch: 'offensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [
      { type: 'damage_bonus', value: 150, description: '150% dano mÃ¡gico de fogo' },
      { type: 'burn', value: 3, duration: 3, description: '+3% queimadura por 3 turnos por nÃ­vel' },
    ],
    isPassive: false,
    cooldown: 3,
    manaCost: 20,
  },
  {
    id: 'mage_ice_ray',
    name: 'Raio GÃ©lido',
    emoji: 'â„ï¸',
    description: 'Dispara um raio de gelo.',
    branch: 'offensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [
      { type: 'damage_bonus', value: 130, description: '130% dano mÃ¡gico de gelo' },
      { type: 'debuff_enemy', value: 20, duration: 2, description: '-20% velocidade por 2 turnos' },
    ],
    isPassive: false,
    cooldown: 3,
    manaCost: 18,
  },
  {
    id: 'mage_lightning',
    name: 'RelÃ¢mpago',
    emoji: 'âš¡',
    description: 'Invoca um relÃ¢mpago devastador.',
    branch: 'offensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [
      { type: 'damage_bonus', value: 140, description: '140% dano elÃ©trico' },
      { type: 'stun_chance', value: 25, duration: 1, description: '25% chance de paralisia' },
    ],
    isPassive: false,
    cooldown: 3,
    manaCost: 22,
  },

  // Tier 3
  {
    id: 'mage_meteor',
    name: 'Meteoro',
    emoji: 'â˜„ï¸',
    description: 'Invoca um meteoro devastador.',
    branch: 'offensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'aoe_damage', value: 200, description: '200% dano AoE +50% por nÃ­vel' }],
    isPassive: false,
    cooldown: 5,
    manaCost: 40,
  },
  {
    id: 'mage_arcane_explosion',
    name: 'ExplosÃ£o Arcana',
    emoji: 'ðŸ’¥',
    description: 'Libera energia arcana pura.',
    branch: 'offensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'damage_bonus', value: 200, description: 'Dano = 200% do INT +30% por nÃ­vel' }],
    isPassive: false,
    cooldown: 4,
    manaCost: 35,
  },
  {
    id: 'mage_drain_life',
    name: 'Drenar Vida',
    emoji: 'ðŸ’œ',
    description: 'Drena vida do inimigo.',
    branch: 'offensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [
      { type: 'damage_bonus', value: 120, description: '120% dano mÃ¡gico' },
      { type: 'lifesteal', value: 30, description: '30% do dano vira cura +10% por nÃ­vel' },
    ],
    isPassive: false,
    cooldown: 4,
    manaCost: 30,
  },

  // Ultimate
  {
    id: 'mage_arcane_apocalypse',
    name: 'Apocalipse Arcano',
    emoji: 'ðŸŒŒ',
    description: 'Desencadeia destruiÃ§Ã£o arcana total.',
    branch: 'offensive',
    tier: 4,
    pointsCost: 5,
    maxLevel: 1,
    requiredPoints: 18,
    effects: [
      { type: 'damage_bonus', value: 500, description: '500% dano mÃ¡gico' },
      { type: 'special', value: 1, description: 'Ignora todas as resistÃªncias' },
    ],
    isPassive: false,
    cooldown: 10,
    manaCost: 80,
  },
];

// === ÃRVORE DEFENSIVA (ProteÃ§Ã£o) ===
const defensiveSkills: Skill[] = [
  // Tier 1
  {
    id: 'mage_magic_barrier',
    name: 'Barreira MÃ¡gica',
    emoji: 'ðŸ›¡ï¸',
    description: 'Aumenta a resistÃªncia mÃ¡gica.',
    branch: 'defensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'damage_reduction', value: 20, description: '+20% resistÃªncia mÃ¡gica por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_mana_shield',
    name: 'Manto de Mana',
    emoji: 'ðŸ’ ',
    description: 'Converte dano em custo de mana.',
    branch: 'defensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'special', value: 10, description: '10% do dano absorvido por mana por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_blink',
    name: 'Teleporte Curto',
    emoji: 'âœ¨',
    description: 'Chance de evadir ataques.',
    branch: 'defensive',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'evasion', value: 15, description: '+15% evasÃ£o por nÃ­vel' }],
    isPassive: true,
  },

  // Tier 2
  {
    id: 'mage_arcane_shield',
    name: 'Escudo Arcano',
    emoji: 'ðŸ”µ',
    description: 'Cria um escudo que absorve dano.',
    branch: 'defensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [{ type: 'shield', value: 50, description: 'Absorve dano = 50% INT +25% por nÃ­vel' }],
    isPassive: false,
    cooldown: 5,
    manaCost: 25,
  },
  {
    id: 'mage_counter_magic',
    name: 'Contra-Magia',
    emoji: 'â†©ï¸',
    description: 'Reflete parte do dano mÃ¡gico.',
    branch: 'defensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [{ type: 'special', value: 20, description: 'Reflete 20% dano mÃ¡gico +10% por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_invisibility',
    name: 'Invisibilidade',
    emoji: 'ðŸ‘»',
    description: 'Fica invisÃ­vel por 1 turno.',
    branch: 'defensive',
    tier: 2,
    pointsCost: 2,
    maxLevel: 1,
    requiredPoints: 3,
    effects: [{ type: 'immunity', value: 1, duration: 1, description: '1 turno sem receber dano' }],
    isPassive: false,
    cooldown: 5,
    manaCost: 30,
  },

  // Tier 3
  {
    id: 'mage_time_stop',
    name: 'Tempo Parado',
    emoji: 'â±ï¸',
    description: 'Para o tempo e pula turno do inimigo.',
    branch: 'defensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 1,
    requiredPoints: 9,
    effects: [{ type: 'special', value: 1, description: 'Pula turno do inimigo (1x/batalha)' }],
    isPassive: false,
    cooldown: 99,
    manaCost: 50,
  },
  {
    id: 'mage_illusory_clone',
    name: 'Clone IlusÃ³rio',
    emoji: 'ðŸ‘¥',
    description: 'Cria um clone que desvia ataques.',
    branch: 'defensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'evasion', value: 30, description: '30% chance de desviar ataque +10% por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_absorption',
    name: 'AbsorÃ§Ã£o',
    emoji: 'ðŸ’š',
    description: 'Converte dano mÃ¡gico em cura.',
    branch: 'defensive',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'special', value: 25, description: 'Converte 25% dano mÃ¡gico em HP +10% por nÃ­vel' }],
    isPassive: true,
  },

  // Ultimate
  {
    id: 'mage_arcane_immunity',
    name: 'Imunidade Arcana',
    emoji: 'ðŸŒŸ',
    description: 'Fica imune a magia.',
    branch: 'defensive',
    tier: 4,
    pointsCost: 5,
    maxLevel: 1,
    requiredPoints: 18,
    effects: [{ type: 'immunity', value: 5, description: '5 turnos imune a magia' }],
    isPassive: false,
    cooldown: 15,
    manaCost: 60,
  },
];

// === ÃRVORE UTILIDADE (Conhecimento) ===
const utilitySkills: Skill[] = [
  // Tier 1
  {
    id: 'mage_identify',
    name: 'Identificar',
    emoji: 'ðŸ”',
    description: 'Revela os stats do inimigo.',
    branch: 'utility',
    tier: 1,
    pointsCost: 1,
    maxLevel: 1,
    requiredPoints: 0,
    effects: [{ type: 'special', value: 1, description: 'VÃª stats do inimigo' }],
    isPassive: false,
    cooldown: 0,
    manaCost: 5,
  },
  {
    id: 'mage_wisdom',
    name: 'Sabedoria',
    emoji: 'ðŸ“š',
    description: 'Ganha mais XP.',
    branch: 'utility',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'xp_bonus', value: 15, description: '+15% XP por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_meditation',
    name: 'MeditaÃ§Ã£o',
    emoji: 'ðŸ§˜',
    description: 'Recupera HP e mana entre batalhas.',
    branch: 'utility',
    tier: 1,
    pointsCost: 1,
    maxLevel: 5,
    requiredPoints: 0,
    effects: [{ type: 'regen', value: 5, description: '+5% HP/Mana entre batalhas por nÃ­vel' }],
    isPassive: true,
  },

  // Tier 2
  {
    id: 'mage_enchantment',
    name: 'Encantamento',
    emoji: 'âœ¨',
    description: 'Melhora os stats dos equipamentos.',
    branch: 'utility',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [{ type: 'special', value: 20, description: '+20% stats de equipamento por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_analyze_weakness',
    name: 'Analisar Fraqueza',
    emoji: 'ðŸŽ¯',
    description: 'Descobre e explora fraquezas.',
    branch: 'utility',
    tier: 2,
    pointsCost: 2,
    maxLevel: 3,
    requiredPoints: 3,
    effects: [{ type: 'damage_bonus', value: 25, description: '+25% dano ao tipo do inimigo por nÃ­vel' }],
    isPassive: true,
  },
  {
    id: 'mage_portal',
    name: 'Portal',
    emoji: 'ðŸŒ€',
    description: 'Pode fugir de qualquer batalha.',
    branch: 'utility',
    tier: 2,
    pointsCost: 2,
    maxLevel: 1,
    requiredPoints: 3,
    effects: [{ type: 'special', value: 1, description: 'Pode fugir de qualquer batalha' }],
    isPassive: false,
    cooldown: 0,
    manaCost: 10,
  },

  // Tier 3
  {
    id: 'mage_group_buff',
    name: 'Buff de Grupo',
    emoji: 'ðŸ’ª',
    description: 'Aumenta dano mÃ¡gico dos aliados.',
    branch: 'utility',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'buff_ally', value: 15, description: '+15% dano mÃ¡gico para aliados por nÃ­vel' }],
    isPassive: false,
    cooldown: 5,
    manaCost: 35,
  },
  {
    id: 'mage_aoe_debuff',
    name: 'Debuff AoE',
    emoji: 'â¬‡ï¸',
    description: 'Reduz defesa de todos inimigos.',
    branch: 'utility',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'debuff_enemy', value: 20, description: '-20% defesa de todos inimigos por nÃ­vel' }],
    isPassive: false,
    cooldown: 5,
    manaCost: 30,
  },
  {
    id: 'mage_arcane_vision',
    name: 'VisÃ£o Arcana',
    emoji: 'ðŸ‘ï¸',
    description: 'Aumenta chance de drop raro.',
    branch: 'utility',
    tier: 3,
    pointsCost: 3,
    maxLevel: 3,
    requiredPoints: 9,
    effects: [{ type: 'drop_bonus', value: 30, description: '+30% chance de drop raro por nÃ­vel' }],
    isPassive: true,
  },

  // Ultimate
  {
    id: 'mage_omniscience',
    name: 'OnisciÃªncia',
    emoji: 'ðŸŒŸ',
    description: 'Conhecimento absoluto em combate.',
    branch: 'utility',
    tier: 4,
    pointsCost: 5,
    maxLevel: 1,
    requiredPoints: 18,
    effects: [{ type: 'special', value: 3, description: 'Sempre acerta, sempre critica por 3 turnos' }],
    isPassive: false,
    cooldown: 12,
    manaCost: 50,
  },
];

// === ÃRVORE ULTIMATE (Arquimago) ===
const ultimateSkills: Skill[] = [
  {
    id: 'mage_elemental_master',
    name: 'Mestre dos Elementos',
    emoji: 'ðŸ”±',
    description: 'Domina todos os elementos.',
    branch: 'ultimate',
    tier: 4,
    pointsCost: 10,
    maxLevel: 1,
    requiredPoints: 30,
    effects: [{ type: 'damage_bonus', value: 30, description: '+30% dano de todos elementos' }],
    isPassive: true,
  },
  {
    id: 'mage_infinite_reserve',
    name: 'Reserva Infinita',
    emoji: 'â™¾ï¸',
    description: 'Magias nÃ£o consomem mana.',
    branch: 'ultimate',
    tier: 4,
    pointsCost: 10,
    maxLevel: 1,
    requiredPoints: 30,
    effects: [{ type: 'special', value: 0, description: 'Magias nÃ£o consomem mana' }],
    isPassive: true,
  },
  {
    id: 'mage_transcendence',
    name: 'TranscendÃªncia',
    emoji: 'ðŸ’Ž',
    description: 'Dano escala com HP tambÃ©m.',
    branch: 'ultimate',
    tier: 4,
    pointsCost: 10,
    maxLevel: 1,
    requiredPoints: 30,
    effects: [{ type: 'special', value: 1, description: 'Dano mÃ¡gico escala com HP tambÃ©m' }],
    isPassive: true,
  },
];

export const mageSkillTree: SkillTree = {
  classId: 'mage',
  className: 'Mago',
  branches: {
    offensive: offensiveSkills,
    defensive: defensiveSkills,
    utility: utilitySkills,
    ultimate: ultimateSkills,
  },
};

export const getAllMageSkills = (): Skill[] => {
  return [...offensiveSkills, ...defensiveSkills, ...utilitySkills, ...ultimateSkills];
};

export const getMageSkillById = (skillId: string): Skill | undefined => {
  return getAllMageSkills().find(s => s.id === skillId);
};
